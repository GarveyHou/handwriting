<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    // Function.prototype.myCall = function(context) {
    //   if (typeof this !== "function") {
    //     console.log("Type Error!");
    //   }
    //   let args = [...arguments].slice(1),
    //     result = null;

    //   context = context || window;
    //   context.fn = this;
    //   result = context.fn(...args);
    //   delete context.fn;
    //   return result;
    // }

    // Function.prototype.myApply = function(context) {
    //   if (typeof this !== "funciton") {
    //     console.log("Type Error!");
    //   }

    //   let context = context || window;
    //   let result = null;
    //   context.fn = this;

    //   if (arguments[1]) {
    //     result = context.fn(...arguments[1])
    //   } else {
    //     result = context.fn();
    //   }

    //   delete context.fn;
    //   return result;
    // }

    // Function.prototype.myBind = function(context) {
    //   if (typeof this !== "funciton") {
    //     console.log("Type Error!");
    //   }

    //   var args = [...arguments].slice[1],
    //     fn = this;
    //   return function Fn() {
    //     return fn.apply(
    //       this.instanceof Fn ? this : context;
    //     )
    //   }
    // }
    name = "侯老师"

    function person(a, b, c, d) {
      console.log(this.name);
      console.log(a, b, c, d);
      // return {
      //   name: this.name,
      //   a: a,
      //   b: b,
      //   c: c,
      //   d: d
      // }
    }
    person.prototype.collection = "收藏"

    var egg = {
      name: "蛋老师"
    };


    Function.prototype.myCall = function(obj) {
      var obj = obj || window
      obj.p = this;
      var args = [...arguments].slice(1);
      var result = obj.p(...args)
      delete(obj.p);
      return result
    }

    Function.prototype.myApply = function(obj) {
      obj.p = this;
      var args = [...arguments][1]
      var result = obj.p(...args)
      delete(obj.p)
      return result
    }


    Function.prototype.myBind = function(obj) {
      if (typeof this !== "function") {
        throw new TypeError("错误");
      }
      var that = this,
        args = [...arguments].slice(1),
        newf = function() {
          var args1 = [...arguments].slice(0),
            argsSum = args.concat(args1),
            o = function() {};
          if (this instanceof o) {
            that.apply(this, argsSum)
          } else {
            that.apply(obj, argsSum);
          }
        }
      o.prototype = that.prototype;
      newf.prototype = new o;
      return newf
    }

    // var res = person.myCall(null, 1, 2, 3, 4);
    // console.log(res);
    // person.myApply(egg, [1, 2, 3, 4])
    var bibi = person.myBind(egg, 1, 2, 3);
    var b = new bibi("充电")
    console.log(b.collection);
  </script>

</body>

</html>